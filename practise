







rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Global Functions
    function isSignedIn() { return request.auth != null; }
    function isAdmin() { return isSignedIn() && request.auth.token.email == 'ownergamebridge@gmail.com'; }
    function isOwner(userId) { return isSignedIn() && request.auth.uid == userId; }

    // 1. User Profiles
    match /users/{userId} {
      allow read: if isSignedIn();
      // Users can only create their own profile and cannot set their own role to 'admin'
      allow create: if isOwner(userId) && request.resource.data.role != 'admin';
      // Only the actual Admin can change roles or status
      allow update: if isAdmin() || (isOwner(userId) && request.resource.data.diff(resource.data).affectedKeys().hasOnly(['status', 'lastLogin']));
      allow delete: if isAdmin();
    }

    // 2. Games Collection
    match /games/{gameId} {
      // Publicly viewable by all logged-in players, but only admin can touch the config
      allow read: if isSignedIn();
      allow write: if isAdmin();
    }

    // 3. Events (The Billing System) - MOST IMPORTANT
    match /events/{eventId} {
      // Prevents players from reading other people's earnings
      allow read: if isAdmin() || (isSignedIn() && resource.data.userName == request.auth.token.email);
      
      allow create: if isSignedIn() 
        // Force the email in the event to match the logged-in user
        && request.resource.data.userName == request.auth.token.email
        // Hard-cap payouts from the client-side to prevent "Million Dollar" fake events
        && request.resource.data.value <= 5.0
        // Ensure they can't create events in the future
        && request.resource.data.timestamp == request.time;

      // NO ONE can edit or delete a billing event once it is created (Audit Trail)
      allow update, delete: if isAdmin();
    }

    // 4. Player Progress
    match /playerProgress/{docId} {
      allow read: if isAdmin() || (isSignedIn() && resource.data.userId == request.auth.token.email);
      allow create: if isSignedIn() && request.resource.data.userId == request.auth.token.email;
      allow update: if isAdmin(); // Only admin can mark a milestone as "Paid"
      allow delete: if isAdmin();
    }
  }
}















â€‹ðŸŽ® GameBridge â€” Clear & Improved Explanation
â€‹1ï¸âƒ£ What GameBridge Is (Plain English)
â€‹GameBridge is a Progressive Web App (PWA) that:
â€‹Lets users discover and launch games from various studios in one place.
â€‹Monetizes engagement for the platform owner when users:
â€‹Watch featured ads before playing.
â€‹Download full game versions from the Play Store.
â€‹Progress through specific in-game levels.
â€‹Gives you (Owner) full visibility into user actions and revenue generated per studio.
â€‹Gives game studios a secure portal to track their game's performance and pay for the traffic you provide.
â€‹2ï¸âƒ£ User Flow (The Player Experience)
â€‹ðŸ” Step 1: Login / Sign-Up: User enters via Google or Email. Firebase manages their profile and session.
â€‹ðŸ•¹ï¸ Step 2: Discovery Dashboard: The user sees a curated list of games with two main options:
â€‹â–¶ï¸ Button 1: Play Now (with Ad): User watches a featured ad to unlock a web demo or instant play version. You earn ad revenue; the user gets immediate access to the game.
â€‹ðŸ“² Button 2: Get Full App: Redirects the user to the Google Play Store. If they install it, you receive an "Install Attribution" event.
â€‹3ï¸âƒ£ Progress Tracking (For Billing)
â€‹Even though players don't earn rewards, the system tracks their progress to trigger payments from the Studios to You:
â€‹Milestones: When a player reaches a specific level (e.g., Level 10), an event is sent to Firebase.
â€‹Verification: Cloud Functions verify the event is legitimate.
â€‹Billing: This completion is logged as a "Billable Event," meaning the studio now owes you the pre-agreed fee for driving a high-quality player to that depth in their game.
â€‹4ï¸âƒ£ The Admin Portal (Your View)
â€‹You monitor the entire ecosystem:
â€‹ðŸ‘¤ User Activity: Track active players and their engagement history.
â€‹ðŸ“º Ad Analytics: See which games are generating the most ad views.
â€‹ðŸ“¥ Performance Metrics: Total installs and level completions driven by your platform.
â€‹ðŸ’° Balance Sheet: Real-time calculation of exactly how much each studio owes you based on the "Rate Card" you set.
â€‹5ï¸âƒ£ The Studio Portal
â€‹Each studio gets a private dashboard to justify their costs:
â€‹Transparency: They see the exact number of ads played and levels reached.
â€‹Invoicing: They view and pay invoices for the traffic/players you sent them.
â€‹Data Only: They cannot see your other partners or access your administrative settings.
â€‹6ï¸âƒ£ Why GameBridge Is Powerful
â€‹âœ… Platform Control: You decide the value of an install or a level completion.
â€‹âœ… B2B Revenue: Your income comes from professional studios paying for performance, not from managing player payouts.
â€‹âœ… Data Integrity: Every launch and level-up is a hard-coded event, making your billing impossible to dispute.
â€‹âœ… Zero Friction: Works as a PWA; players don't need to install GameBridge itself to start playing.
â€‹7ï¸âƒ£ In One Sentence (Pitch Ready)
â€‹"GameBridge is a Firebase-powered PWA that monetizes game discovery by tracking ad views, installs, and level-based milestonesâ€”providing studios with a transparent, high-performance platform for user acquisition and billing

1ï¸âƒ£ User-Facing Features (Player Dashboard / App)

This is what your players will interact with.

a) Player Dashboard

Library of games: Display demos and full apps, with filtering by studio, category, or popularity.

Skeleton loaders & smooth UX: Loading animations while data is fetched.

Responsive design: Works on desktop and mobile.

Secure login/logout: Firebase Auth (Email/password, optional Google/Apple).

b) Monetization & Tracking

Rewarded Ads (Launch Demo)

Player watches ad â†’ unlocks demo.

Revenue logged to Firestore (per-user, per-game).

Install Attribution / CPI Tracking (Full App)

Clicking Full App redirects to Play/App Store via tracking link.

Install confirmed â†’ revenue logged.

Event logging: Track clicks, ad views, installs, session duration.

c) Progress Tracking

Milestones / Levels: Track which levels/milestones each player completed.

Optional achievements & badges: Gamification layer.

d) User account & profile

View username, email, total ad rewards earned.

Account management (change password, view history).

2ï¸âƒ£ Admin Portal (Web / Dashboard)

Admins need to manage games, track revenue, and view analytics.

a) Game Management

Add / edit / remove games.

Set status: active/inactive.

Set ad payout (adPayout) and install payout (installPayout).

Upload images / thumbnails / categories.

b) Revenue Tracking

View total ad revenue per game & per player.

View install revenue (CPI).

Aggregate analytics: daily/weekly/monthly totals.

c) Player Analytics

Track which players played which demos.

Track level/milestone completion.

Optional: Retention metrics (daily active users, sessions).

d) Admin Tools

Manual override of revenue.

Audit logs: who added/edited/removed a game.

Notifications for errors or suspicious behavior.

3ï¸âƒ£ Backend Requirements (Firebase)

Firebase provides serverless backend. Features needed:

a) Auth

Email/password (mandatory).

Optional OAuth: Google, Apple.

b) Firestore Collections

Collection	Description
games	Stores game info (title, studio, URL, adPayout, installPayout, status, createdAt, accumulatedRevenue)
events	Logs ad views, installs, clicks, and revenue events with userName, gameName, type, value, timestamp
playerProgress	Logs milestones / levels completed by player with milestonePaid flag
users	Optional: extra player data (profile, stats)
analytics	Optional: click tracking, session duration, engagement metrics

c) Security Rules

Players: Read only for active games, write only for their events.

Admins: Full read/write access.

Prevent overwriting revenue or injecting fake events.

d) Cloud Functions (Optional but recommended)

Process deferred installs or track real revenue events from affiliate SDK.

Send notifications to players (optional).

Update accumulatedRevenue automatically on events insertion.

4ï¸âƒ£ Ad & Monetization Integrations

a) Rewarded Ads

SDKs: Tapjoy, AppLovin, IronSource, AdMob.

Player must watch full ad â†’ revenue credited.

Optional: Cap ads per session/day.

b) Install Attribution / CPI

Affiliate SDK or tracking links.

Must confirm install â†’ revenue credited.

Optional: Deep link to store or redirect based on device OS.

c) Analytics & ROI Tracking

Track CTR for Play / Install buttons.

Track ad completions.

Provide per-game revenue reports to studios.














// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCLd4MLONU_5OFie6WN2XmXmlMyfuJ5_8I",
  authDomain: "gamebridge-f4789.firebaseapp.com",
  projectId: "gamebridge-f4789",
  storageBucket: "gamebridge-f4789.firebasestorage.app",
  messagingSenderId: "562553872482",
  appId: "1:562553872482:web:02b34e7bc1b7a25af8f13b",
  measurementId: "G-X3B8B4L4XW"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

















