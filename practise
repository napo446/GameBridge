<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GameBridge | Player Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
:root { --primary-bg: #0d1b2a; --accent-teal: #00f5d4; --accent-purple: #a855f7; }
body { font-family: 'Inter', sans-serif; background: radial-gradient(circle at 10% 10%, #1a1a2e 0%, #0f3460 30%, #533483 70%, #16213e 100%); color: white; min-height: 100vh; overflow-x: hidden; position: relative; }
.grid-layer { position: fixed; bottom: -10%; left: -10%; width: 120%; height: 60%; background-image: linear-gradient(to right, rgba(0,245,212,0.05) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,245,212,0.05) 1px, transparent 1px); background-size: 50px 50px; transform: perspective(500px) rotateX(60deg); z-index: 0; }
.g-logo { display: flex; align-items: center; justify-content: center; font-weight: 900; border-radius: 8px; background: linear-gradient(135deg,#bf953f 0%,#fcf6ba 45%,#b38728 50%,#fbf5b7 55%,#aa771c 100%); border:1px solid rgba(255,215,0,0.3); box-shadow:0 0 15px rgba(191,149,63,0.4); color:#1a1a2e; user-select:none; }
.g-logo::after { content: 'G'; }
.glass-panel { background: rgba(255,255,255,0.03); backdrop-filter: blur(20px); border:1px solid rgba(255,255,255,0.1); border-radius:24px; }
.game-card { background: rgba(0,0,0,0.3); border:1px solid rgba(255,255,255,0.05); transition: all 0.3s ease; }
.game-card:hover { border-color: var(--accent-teal); transform: translateY(-2px); }
.btn-play { background: #00bcd4; transition: all 0.3s ease; }
.btn-play:hover { background: #00e5ff; box-shadow:0 0 20px rgba(0,188,212,0.4); }
.btn-install { background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.1); transition: all 0.3s ease; }
.btn-install:hover { background: rgba(255,255,255,0.1); }
.custom-scrollbar::-webkit-scrollbar { width:6px; }
.custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius:10px; }
.skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 75%); background-size: 200% 100%; animation: loading 1.5s infinite; }
@keyframes loading { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
</style>
</head>
<body class="p-4 md:p-8 flex justify-center">

<div class="grid-layer"></div>

<main class="relative z-10 w-full max-w-2xl glass-panel shadow-2xl overflow-hidden flex flex-col h-[90vh]">
    <header class="p-6 border-b border-white/10 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <div class="g-logo w-8 h-8 text-sm"></div>
            <h1 class="text-xl font-bold tracking-tight">GameBridge</h1>
        </div>
        <nav class="flex gap-6 text-sm font-semibold">
            <a href="#" class="text-white border-b-2 border-cyan-400 pb-1">LIBRARY</a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">HISTORY</a>
        </nav>
        <button id="logoutBtn" class="w-8 h-8 rounded-full border border-white/20 flex items-center justify-center hover:bg-white/10">üë§</button>
    </header>

    <div class="p-6">
        <h2 class="text-2xl font-bold mb-2">Discover & Play</h2>
        <p class="text-gray-400 text-sm">Access verified game demos and full titles.</p>
    </div>

    <div id="gamesContainer" class="flex-1 overflow-y-auto p-6 pt-0 custom-scrollbar space-y-4">
        <div id="loader" class="space-y-4">
            <div class="game-card p-4 rounded-2xl h-32 skeleton"></div>
            <div class="game-card p-4 rounded-2xl h-32 skeleton"></div>
            <div class="game-card p-4 rounded-2xl h-32 skeleton"></div>
        </div>
    </div>

    <footer class="p-4 text-center border-t border-white/10">
        <p class="text-[10px] text-gray-500 uppercase tracking-widest">Performance Hub ‚Ä¢ Secure Connection Active</p>
    </footer>
</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { 
    getFirestore, collection, onSnapshot, query, orderBy, where, 
    addDoc, serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// --- Firebase Config ---
const firebaseConfig = {
    apiKey: "AIzaSyCLd4MLONU_5OFie6WN2XmXmlMyfuJ5_8I",
    authDomain: "gamebridge-f4789.firebaseapp.com",
    projectId: "gamebridge-f4789",
    storageBucket: "gamebridge-f4789.firebasestorage.app",
    messagingSenderId: "562553872482",
    appId: "1:562553872482:web:02b34e7bc1b7a25af8f13b"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// --- SESSION SECURITY ---
onAuthStateChanged(auth, user => {
    if (!user) window.location.href = 'index.html';
});

// --- REWARDED AD (Launch Demo) ---
window.handleLaunchDemo = async (gameId, url, adPayout) => {
    if(!auth.currentUser) return;
    const adCompleted = confirm("Watch a 30s ad to launch the demo?");
    if(adCompleted) {
        try {
            await addDoc(collection(db, "events"), {
                userName: auth.currentUser.email,
                gameName: gameId,
                type: "Ad Watched",
                value: Number(adPayout) || 0,
                timestamp: serverTimestamp()
            });
            window.open(url, "_blank");
        } catch(err) {
            console.error("Ad logging failed:", err);
        }
    }
};

// --- INSTALL ATTRIBUTION (Full App) ---
window.handleInstall = async (gameId, url, installPayout) => {
    if(!auth.currentUser) return;
    const confirmed = confirm("Redirecting to Play Store. Track this install?");
    if(confirmed) {
        try {
            await addDoc(collection(db, "events"), {
                userName: auth.currentUser.email,
                gameName: gameId,
                type: "Install",
                value: Number(installPayout) || 0,
                timestamp: serverTimestamp()
            });
            window.open(url, "_blank");
        } catch(err) {
            console.error("Install tracking failed:", err);
        }
    }
};

// --- LEVEL / MILESTONE TRACKING ---
window.logLevelCompletion = async (gameId, level) => {
    if(!auth.currentUser) return;
    try {
        await addDoc(collection(db, "playerProgress"), {
            userId: auth.currentUser.email,
            gameId,
            level,
            milestonePaid: false,
            timestamp: serverTimestamp()
        });
    } catch(err) {
        console.error("Level logging failed:", err);
    }
};

// --- REAL-TIME GAME FETCH ---
const gamesContainer = document.getElementById("gamesContainer");
const q = query(collection(db, "games"), where("status","==","active"), orderBy("createdAt","desc"));

onSnapshot(q, snapshot => {
    gamesContainer.innerHTML = "";
    if(snapshot.empty) {
        gamesContainer.innerHTML = `<p class="text-center text-gray-500 py-10">No games available currently.</p>`;
        return;
    }

    snapshot.forEach(docSnap => {
        const game = docSnap.data();
        const gameId = docSnap.id;
        const card = `
        <div class="game-card p-4 rounded-2xl shadow-lg border-l-4 border-cyan-500/30">
            <div class="flex gap-4 mb-4">
                <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center text-3xl">üïπÔ∏è</div>
                <div class="flex-1">
                    <h3 class="text-lg font-bold text-white">${game.title}</h3>
                    <p class="text-[10px] text-cyan-400 uppercase font-black tracking-widest">${game.studio}</p>
                    <p class="text-[10px] text-gray-500 mt-1 italic">Engagement tracked via GameBridge SDK</p>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-3">
                <button onclick="handleLaunchDemo('${gameId}', '${game.url}', '${game.adPayout}')" class="btn-play py-3 rounded-xl font-bold flex items-center justify-center gap-2 text-xs text-white uppercase">
                    <span>‚ñ∂</span> Launch Demo
                </button>
                <button onclick="handleInstall('${gameId}', '${game.url}', '${game.installPayout}')" class="btn-install py-3 rounded-xl font-bold flex items-center justify-center gap-2 text-xs text-white uppercase">
                    <span>üì≤</span> Full App
                </button>
            </div>
        </div>`;
        gamesContainer.innerHTML += card;
    });
});

// --- LOGOUT ---
document.getElementById("logoutBtn").addEventListener("click", () => {
    if(confirm("Sign out of GameBridge?")) {
        signOut(auth).then(() => window.location.href = "index.html");
    }
});
</script>
</body>
</html>





rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Global Functions
    function isSignedIn() { return request.auth != null; }
    function isAdmin() { return isSignedIn() && request.auth.token.email == 'ownergamebridge@gmail.com'; }
    function isOwner(userId) { return isSignedIn() && request.auth.uid == userId; }

    // 1. User Profiles
    match /users/{userId} {
      allow read: if isSignedIn();
      // Users can only create their own profile and cannot set their own role to 'admin'
      allow create: if isOwner(userId) && request.resource.data.role != 'admin';
      // Only the actual Admin can change roles or status
      allow update: if isAdmin() || (isOwner(userId) && request.resource.data.diff(resource.data).affectedKeys().hasOnly(['status', 'lastLogin']));
      allow delete: if isAdmin();
    }

    // 2. Games Collection
    match /games/{gameId} {
      // Publicly viewable by all logged-in players, but only admin can touch the config
      allow read: if isSignedIn();
      allow write: if isAdmin();
    }

    // 3. Events (The Billing System) - MOST IMPORTANT
    match /events/{eventId} {
      // Prevents players from reading other people's earnings
      allow read: if isAdmin() || (isSignedIn() && resource.data.userName == request.auth.token.email);
      
      allow create: if isSignedIn() 
        // Force the email in the event to match the logged-in user
        && request.resource.data.userName == request.auth.token.email
        // Hard-cap payouts from the client-side to prevent "Million Dollar" fake events
        && request.resource.data.value <= 5.0
        // Ensure they can't create events in the future
        && request.resource.data.timestamp == request.time;

      // NO ONE can edit or delete a billing event once it is created (Audit Trail)
      allow update, delete: if isAdmin();
    }

    // 4. Player Progress
    match /playerProgress/{docId} {
      allow read: if isAdmin() || (isSignedIn() && resource.data.userId == request.auth.token.email);
      allow create: if isSignedIn() && request.resource.data.userId == request.auth.token.email;
      allow update: if isAdmin(); // Only admin can mark a milestone as "Paid"
      allow delete: if isAdmin();
    }
  }
}















‚ÄãüéÆ GameBridge ‚Äî Clear & Improved Explanation
‚Äã1Ô∏è‚É£ What GameBridge Is (Plain English)
‚ÄãGameBridge is a Progressive Web App (PWA) that:
‚ÄãLets users discover and launch games from various studios in one place.
‚ÄãMonetizes engagement for the platform owner when users:
‚ÄãWatch featured ads before playing.
‚ÄãDownload full game versions from the Play Store.
‚ÄãProgress through specific in-game levels.
‚ÄãGives you (Owner) full visibility into user actions and revenue generated per studio.
‚ÄãGives game studios a secure portal to track their game's performance and pay for the traffic you provide.
‚Äã2Ô∏è‚É£ User Flow (The Player Experience)
‚Äãüîê Step 1: Login / Sign-Up: User enters via Google or Email. Firebase manages their profile and session.
‚ÄãüïπÔ∏è Step 2: Discovery Dashboard: The user sees a curated list of games with two main options:
‚Äã‚ñ∂Ô∏è Button 1: Play Now (with Ad): User watches a featured ad to unlock a web demo or instant play version. You earn ad revenue; the user gets immediate access to the game.
‚Äãüì≤ Button 2: Get Full App: Redirects the user to the Google Play Store. If they install it, you receive an "Install Attribution" event.
‚Äã3Ô∏è‚É£ Progress Tracking (For Billing)
‚ÄãEven though players don't earn rewards, the system tracks their progress to trigger payments from the Studios to You:
‚ÄãMilestones: When a player reaches a specific level (e.g., Level 10), an event is sent to Firebase.
‚ÄãVerification: Cloud Functions verify the event is legitimate.
‚ÄãBilling: This completion is logged as a "Billable Event," meaning the studio now owes you the pre-agreed fee for driving a high-quality player to that depth in their game.
‚Äã4Ô∏è‚É£ The Admin Portal (Your View)
‚ÄãYou monitor the entire ecosystem:
‚Äãüë§ User Activity: Track active players and their engagement history.
‚Äãüì∫ Ad Analytics: See which games are generating the most ad views.
‚Äãüì• Performance Metrics: Total installs and level completions driven by your platform.
‚Äãüí∞ Balance Sheet: Real-time calculation of exactly how much each studio owes you based on the "Rate Card" you set.
‚Äã5Ô∏è‚É£ The Studio Portal
‚ÄãEach studio gets a private dashboard to justify their costs:
‚ÄãTransparency: They see the exact number of ads played and levels reached.
‚ÄãInvoicing: They view and pay invoices for the traffic/players you sent them.
‚ÄãData Only: They cannot see your other partners or access your administrative settings.
‚Äã6Ô∏è‚É£ Why GameBridge Is Powerful
‚Äã‚úÖ Platform Control: You decide the value of an install or a level completion.
‚Äã‚úÖ B2B Revenue: Your income comes from professional studios paying for performance, not from managing player payouts.
‚Äã‚úÖ Data Integrity: Every launch and level-up is a hard-coded event, making your billing impossible to dispute.
‚Äã‚úÖ Zero Friction: Works as a PWA; players don't need to install GameBridge itself to start playing.
‚Äã7Ô∏è‚É£ In One Sentence (Pitch Ready)
‚Äã"GameBridge is a Firebase-powered PWA that monetizes game discovery by tracking ad views, installs, and level-based milestones‚Äîproviding studios with a transparent, high-performance platform for user acquisition and billing

1Ô∏è‚É£ User-Facing Features (Player Dashboard / App)

This is what your players will interact with.

a) Player Dashboard

Library of games: Display demos and full apps, with filtering by studio, category, or popularity.

Skeleton loaders & smooth UX: Loading animations while data is fetched.

Responsive design: Works on desktop and mobile.

Secure login/logout: Firebase Auth (Email/password, optional Google/Apple).

b) Monetization & Tracking

Rewarded Ads (Launch Demo)

Player watches ad ‚Üí unlocks demo.

Revenue logged to Firestore (per-user, per-game).

Install Attribution / CPI Tracking (Full App)

Clicking Full App redirects to Play/App Store via tracking link.

Install confirmed ‚Üí revenue logged.

Event logging: Track clicks, ad views, installs, session duration.

c) Progress Tracking

Milestones / Levels: Track which levels/milestones each player completed.

Optional achievements & badges: Gamification layer.

d) User account & profile

View username, email, total ad rewards earned.

Account management (change password, view history).

2Ô∏è‚É£ Admin Portal (Web / Dashboard)

Admins need to manage games, track revenue, and view analytics.

a) Game Management

Add / edit / remove games.

Set status: active/inactive.

Set ad payout (adPayout) and install payout (installPayout).

Upload images / thumbnails / categories.

b) Revenue Tracking

View total ad revenue per game & per player.

View install revenue (CPI).

Aggregate analytics: daily/weekly/monthly totals.

c) Player Analytics

Track which players played which demos.

Track level/milestone completion.

Optional: Retention metrics (daily active users, sessions).

d) Admin Tools

Manual override of revenue.

Audit logs: who added/edited/removed a game.

Notifications for errors or suspicious behavior.

3Ô∏è‚É£ Backend Requirements (Firebase)

Firebase provides serverless backend. Features needed:

a) Auth

Email/password (mandatory).

Optional OAuth: Google, Apple.

b) Firestore Collections

Collection	Description
games	Stores game info (title, studio, URL, adPayout, installPayout, status, createdAt, accumulatedRevenue)
events	Logs ad views, installs, clicks, and revenue events with userName, gameName, type, value, timestamp
playerProgress	Logs milestones / levels completed by player with milestonePaid flag
users	Optional: extra player data (profile, stats)
analytics	Optional: click tracking, session duration, engagement metrics

c) Security Rules

Players: Read only for active games, write only for their events.

Admins: Full read/write access.

Prevent overwriting revenue or injecting fake events.

d) Cloud Functions (Optional but recommended)

Process deferred installs or track real revenue events from affiliate SDK.

Send notifications to players (optional).

Update accumulatedRevenue automatically on events insertion.

4Ô∏è‚É£ Ad & Monetization Integrations

a) Rewarded Ads

SDKs: Tapjoy, AppLovin, IronSource, AdMob.

Player must watch full ad ‚Üí revenue credited.

Optional: Cap ads per session/day.

b) Install Attribution / CPI

Affiliate SDK or tracking links.

Must confirm install ‚Üí revenue credited.

Optional: Deep link to store or redirect based on device OS.

c) Analytics & ROI Tracking

Track CTR for Play / Install buttons.

Track ad completions.

Provide per-game revenue reports to studios.














// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCLd4MLONU_5OFie6WN2XmXmlMyfuJ5_8I",
  authDomain: "gamebridge-f4789.firebaseapp.com",
  projectId: "gamebridge-f4789",
  storageBucket: "gamebridge-f4789.firebasestorage.app",
  messagingSenderId: "562553872482",
  appId: "1:562553872482:web:02b34e7bc1b7a25af8f13b",
  measurementId: "G-X3B8B4L4XW"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

















