<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameBridge | Admin Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: white; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        input, select { background: rgba(255,255,255,0.1) !important; border: 1px solid rgba(255,255,255,0.1) !important; color: white !important; }
        #userList::-webkit-scrollbar, #eventFeed::-webkit-scrollbar { width: 4px; }
        #userList::-webkit-scrollbar-thumb, #eventFeed::-webkit-scrollbar-thumb { background: rgba(0, 245, 212, 0.2); border-radius: 10px; }
        .status-pill { padding: 2px 8px; border-radius: 4px; font-size: 9px; font-weight: 800; text-transform: uppercase; }
    </style>
</head>
<body class="p-4 md:p-8">
    <nav class="flex justify-between items-center mb-10">
        <div class="flex items-center gap-2">
            <span class="text-2xl">üéÆ</span>
            <h1 class="text-2xl font-bold text-cyan-400">GameBridge <span class="text-white font-light text-sm uppercase tracking-widest ml-2 italic">Master Portal</span></h1>
        </div>
        <div class="flex items-center gap-4">
            <span class="text-xs text-gray-400 hidden md:block">System Status: <span class="text-green-400">Secure</span></span>
            <button id="logoutBtn" class="text-sm bg-red-500/20 text-red-400 px-4 py-2 rounded-lg hover:bg-red-500 hover:text-white transition">Logout</button>
        </div>
    </nav>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-10">
        <div class="glass p-6 rounded-2xl border-l-4 border-blue-500">
            <p class="text-gray-400 text-xs uppercase font-bold tracking-tighter">Total Players</p>
            <h2 id="playerCount" class="text-3xl font-bold">0</h2>
        </div>
        <div class="glass p-6 rounded-2xl border-l-4 border-purple-500">
            <p class="text-gray-400 text-xs uppercase font-bold tracking-tighter">Live Inventory</p>
            <h2 id="gameCount" class="text-3xl font-bold">0</h2>
        </div>
        <div class="glass p-6 rounded-2xl border-l-4 border-cyan-400">
            <p class="text-gray-400 text-xs uppercase font-bold tracking-tighter">Total Unpaid Balance</p>
            <h2 id="totalRevenue" class="text-3xl font-bold text-cyan-400">$0.00</h2>
        </div>
        <div class="glass p-6 rounded-2xl border-l-4 border-green-500">
            <p class="text-gray-400 text-xs uppercase font-bold tracking-tighter">Verified Events</p>
            <h2 id="eventCount" class="text-3xl font-bold">0</h2>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="glass p-6 rounded-3xl h-[600px] flex flex-col">
            <h3 class="text-lg font-bold mb-4 flex items-center justify-between">
                <span>Player Directory</span>
                <span id="liveIndicator" class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            </h3>
            <div id="userList" class="space-y-3 overflow-y-auto pr-2 flex-grow"></div>
        </div>

        <div class="glass p-6 rounded-3xl h-[600px] flex flex-col border-t-2 border-cyan-900">
            <h3 class="text-lg font-bold mb-4 text-cyan-400">Live Billing Stream</h3>
            <div id="eventFeed" class="space-y-3 overflow-y-auto pr-2 flex-grow"></div>
        </div>

        <div class="glass p-6 rounded-3xl h-fit">
            <h3 class="text-lg font-bold mb-4 text-cyan-400">Deploy New Game</h3>
            <div class="space-y-4">
                <input type="text" id="gameTitle" placeholder="Game Title" class="w-full p-3 rounded-xl outline-none">
                <input type="text" id="gameUrl" placeholder="Game URL" class="w-full p-3 rounded-xl outline-none">
                <input type="text" id="studioName" placeholder="Studio Name" class="w-full p-3 rounded-xl outline-none">
                <div class="grid grid-cols-2 gap-2">
                    <input type="number" id="adPayout" placeholder="Ad Pay $" class="w-full p-3 rounded-xl outline-none">
                    <input type="number" id="installPayout" placeholder="Inst Pay $" class="w-full p-3 rounded-xl outline-none">
                </div>
                <div class="flex gap-2">
                    <input type="number" id="targetLevel" placeholder="Target Level" class="w-1/3 p-3 rounded-xl outline-none">
                    <input type="number" id="levelPayout" placeholder="Level Pay $" class="w-2/3 p-3 rounded-xl outline-none">
                </div>
                <button id="addGameBtn" class="w-full bg-cyan-500 text-black font-black py-4 rounded-xl hover:bg-cyan-400 transition">PUSH CONFIG TO LIVE</button>
            </div>
        </div>
    </div>

    <div class="mt-10 glass p-6 rounded-3xl overflow-x-auto">
        <h3 class="text-xl font-bold mb-6">Inventory & Studio Performance</h3>
        <table class="w-full text-left text-sm">
            <thead>
                <tr class="text-gray-400 border-b border-white/10 uppercase text-[10px]">
                    <th class="pb-4">Game Detail</th>
                    <th class="pb-4">Studio</th>
                    <th class="pb-4">Revenue</th>
                    <th class="pb-4">Status</th>
                    <th class="pb-4 text-right">Actions</th>
                </tr>
            </thead>
            <tbody id="inventoryTable"></tbody>
        </table>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { 
            getFirestore, collection, addDoc, deleteDoc, updateDoc, doc, getDoc,
            serverTimestamp, onSnapshot, query, orderBy, limit 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { 
            apiKey: "AIzaSyCLd4MLONU_5OFie6WN2XmXmlMyfuJ5_8I",
            authDomain: "gamebridge-f4789.firebaseapp.com",
            projectId: "gamebridge-f4789",
            storageBucket: "gamebridge-f4789.firebasestorage.app",
            messagingSenderId: "562553872482",
            appId: "1:562553872482:web:02b34e7bc1b7a25af8f13b"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const ADMIN_EMAIL = "ownergamebridge@gmail.com";

        onAuthStateChanged(auth, (u) => { if (!u || u.email !== ADMIN_EMAIL) window.location.href = 'index.html'; });
        document.getElementById('logoutBtn').addEventListener('click', () => signOut(auth).then(() => window.location.href = 'index.html'));

        // 1. Install Tracking Function
        async function registerInstall(userId, gameId) {
            try {
                const gameRef = doc(db, "games", gameId);
                const gameSnap = await getDoc(gameRef);
                const revenue = gameSnap.data().installPayout || 0;

                await addDoc(collection(db, "events"), {
                    userName: userId,
                    gameName: gameSnap.data().title,
                    type: "Install",
                    value: revenue,
                    timestamp: serverTimestamp()
                });

                const currentRevenue = gameSnap.data().accumulatedRevenue || 0;
                await updateDoc(gameRef, { accumulatedRevenue: currentRevenue + revenue });
            } catch (err) { console.error("Tracking failed", err); }
        }

        // 2. Milestone Tracking (Real-time listener)
        onSnapshot(collection(db, "playerProgress"), (snap) => {
            snap.forEach(async docSnap => {
                const data = docSnap.data();
                const gameRef = doc(db, "games", data.gameId);
                const gameSnap = await getDoc(gameRef);
                const milestone = gameSnap.data().milestones;

                if (data.level >= milestone.level && !data.milestonePaid) {
                    await updateDoc(doc(db, "playerProgress", docSnap.id), { milestonePaid: true });
                    
                    const payValue = parseFloat(milestone.payout);
                    await addDoc(collection(db, "events"), {
                        userName: data.userId,
                        gameName: gameSnap.data().title,
                        type: `Milestone Lvl ${milestone.level}`,
                        value: payValue,
                        timestamp: serverTimestamp()
                    });

                    const currentRevenue = gameSnap.data().accumulatedRevenue || 0;
                    await updateDoc(gameRef, { accumulatedRevenue: currentRevenue + payValue });
                }
            });
        });

        // 3. UI Listeners (Players, Revenue, Games)
        onSnapshot(collection(db, "users"), (snap) => {
            document.getElementById('playerCount').innerText = snap.size;
            const list = document.getElementById('userList');
            list.innerHTML = "";
            snap.forEach(d => {
                const u = d.data();
                list.innerHTML += `<div class="p-3 bg-white/5 rounded-xl flex justify-between"><span>${u.email}</span><button onclick="kickUser('${d.id}')" class="text-red-400">KICK</button></div>`;
            });
        });

        onSnapshot(query(collection(db, "events"), orderBy("timestamp", "desc"), limit(20)), (snap) => {
            const feed = document.getElementById('eventFeed');
            let total = 0; feed.innerHTML = "";
            snap.forEach(d => {
                const e = d.data(); total += (e.value || 0);
                feed.innerHTML += `<div class="p-3 bg-cyan-400/5 border-l-2 border-cyan-400"><b>${e.type}</b>: +$${(e.value||0).toFixed(2)}<br><small>${e.userName}</small></div>`;
            });
            document.getElementById('totalRevenue').innerText = `$${total.toFixed(2)}`;
            document.getElementById('eventCount').innerText = snap.size;
        });

        onSnapshot(collection(db, "games"), (snap) => {
            document.getElementById('gameCount').innerText = snap.size;
            const table = document.getElementById('inventoryTable');
            table.innerHTML = "";
            snap.forEach(d => {
                const g = d.data();
                table.innerHTML += `<tr class="border-b border-white/5"><td class="py-4">${g.title}</td><td>${g.studio}</td><td class="text-green-400">$${(g.accumulatedRevenue||0).toFixed(2)}</td><td>${g.status}</td><td class="text-right"><button onclick="deleteGame('${d.id}')">üóëÔ∏è</button></td></tr>`;
            });
        });

        // 4. Deploy Game
        document.getElementById('addGameBtn').addEventListener('click', async () => {
            const title = document.getElementById('gameTitle').value;
            const url = document.getElementById('gameUrl').value;
            const studio = document.getElementById('studioName').value;
            const ad = parseFloat(document.getElementById('adPayout').value) || 0;
            const inst = parseFloat(document.getElementById('installPayout').value) || 0;
            const lvl = document.getElementById('targetLevel').value;
            const lvlP = parseFloat(document.getElementById('levelPayout').value) || 0;

            await addDoc(collection(db, "games"), {
                title, url, studio, status: 'active',
                adPayout: ad, installPayout: inst,
                milestones: { level: lvl, payout: lvlP },
                accumulatedRevenue: 0, createdAt: serverTimestamp()
            });
            alert("Deployed!");
        });

        window.kickUser = (id) => deleteDoc(doc(db, "users", id));
        window.deleteGame = (id) => deleteDoc(doc(db, "games", id));
    </script>
</body>
</html>












// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCLd4MLONU_5OFie6WN2XmXmlMyfuJ5_8I",
  authDomain: "gamebridge-f4789.firebaseapp.com",
  projectId: "gamebridge-f4789",
  storageBucket: "gamebridge-f4789.firebasestorage.app",
  messagingSenderId: "562553872482",
  appId: "1:562553872482:web:02b34e7bc1b7a25af8f13b",
  measurementId: "G-X3B8B4L4XW"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

















üéÆ GameBridge ‚Äî Clear & Improved Explanation
1Ô∏è‚É£ What GameBridge Is (Plain English)

GameBridge is a Progressive Web App (PWA) that:

Lets users discover games

Rewards developers when users:

Watch ads before playing

Download games from Play Store

Reach specific in-game levels

Gives you (GameBridge owner) full visibility into:

User actions

Ad views

App installs

Level milestones

Payments owed & received

Gives game companies a secure portal to:

See performance

Pay you

Track compliance

Think of it as a bridge between users, advertisers, and game studios ‚Äî hence GameBridge.

2Ô∏è‚É£ User Flow (Very Clear)
üîê Step 1: Login / Sign-Up

User opens the PWA and sees a login page.

Login options:

Google Sign-In

Email & password

Firebase handles:

Authentication

Session management

User identity

üïπÔ∏è Step 2: Game Discovery Page

After login, the user sees a list of games.

Each game card shows:

Game name

Studio name

Rewards info

Two buttons:

‚ñ∂Ô∏è Button 1: Play with Ad

User must watch 30+ second rewarded ad

After ad completion:

User can play the game (web demo / instant play / redirect)

You earn ad revenue

Event is tracked:

User ID

Game ID

Ad ID

Timestamp

üì≤ Button 2: Download App

Redirects to Google Play Store

Uses tracking link (campaign ID)

If app is installed:

You get install attribution

Potential CPI payout

Event is tracked:

Game ID

User ID

Install click

3Ô∏è‚É£ Level Tracking (Very Important)

Each game defines paid milestones, for example:

Game	Level	Payout
Zombie Rush	Level 5	$0.50
Zombie Rush	Level 10	$1.50
Racing Pro	Level 3	$0.30

How it works:

Game SDK or API sends level progress to GameBridge

Firebase Cloud Functions verify:

Valid user

Valid game

Valid level

When milestone is reached:

You are eligible for payment

Event is logged for billing

4Ô∏è‚É£ What You (Admin) Can See
üß† Admin Portal (GameBridge Dashboard)

You can see:

üë§ Users

Who signed up

Login method

Activity history

üì∫ Ads

Who watched which ad

For which game

Completion status

Revenue earned

üì• Downloads

Which apps were downloaded

From which campaign

Which users installed

üéØ Level Milestones

User progress per game

Which level triggered payment

Payment status

üí∞ Revenue Tracking

How much you‚Äôre owed

Per game

Per studio

Per period

5Ô∏è‚É£ Game Company Portal

Each game studio gets a restricted portal.

They can:

View their own game stats

See:

Ad plays

Installs

Level completions

See invoices

Pay securely

They cannot:

See other studios

Modify data

Access admin tools

6Ô∏è‚É£ Payments & Security
üí≥ Secure Payment Space

Firebase + Stripe (recommended)

Each payment linked to:

Game

Studio

Period

Payment statuses:

Pending

Paid

Overdue

Cloud Functions:

Validate payment

Lock records after payment

Generate receipts

7Ô∏è‚É£ Firebase Architecture (High Level)
üî• Firebase Services Used
Service	Purpose
Firebase Auth	Login (Google + Email)
Firestore	Users, games, events
Cloud Functions	Secure logic (ads, payments)
Firebase Hosting	PWA hosting
Firebase Analytics	User behavior
Cloud Storage	Assets & reports
8Ô∏è‚É£ Data That Is Tracked (Very Important)

Every action becomes an event:

{
  "userId": "abc123",
  "gameId": "zombie_rush",
  "event": "ad_completed",
  "value": 0.05,
  "timestamp": "2025-12-22T10:15:00Z"
}


This makes:

Auditing possible

Payments provable

Disputes defensible

9Ô∏è‚É£ Why GameBridge Is Powerful

‚úÖ You control attribution
‚úÖ You control reporting
‚úÖ You control payouts
‚úÖ Studios trust your data
‚úÖ Firebase scales automatically
‚úÖ Works as PWA (no app install needed)

üîü In One Sentence (Pitch Ready)

GameBridge is a Firebase-powered PWA that monetizes game discovery by tracking ad views, installs, and level-based milestones‚Äîgiving developers and studios a transparent, secure platform for performance-based payouts.


